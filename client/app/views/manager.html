<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">Seng 422 - Team Tyrion</a>
    </div>
    <div class="navbar-collapse collapse">
      <form name="loginForm" class="navbar-form navbar-right" role="form" ng-hide="isLoggedIn">
        <div class="form-group">
          <label class="sr-only" for="username_entry">Username</label>
          <input ng-model="username" type="text" placeholder="Username" class="form-control" id="username_entry" required>
        </div>
        <div class="form-group">
          <label class="sr-only" for="password_entry">Password</label>
          <input type="password" ng-model="password" placeholder="Password" class="form-control" id="password_entry" required>
        </div>
        <button type="submit" ng-click="signIn()" class="btn btn-success">Sign in</button>
      </form>
 	  <div class="nag navbar-nav navbar-left" ng-show="isLoggedIn">
 	  	<ul class="nav navbar-nav">
        <li class="active"><a href="#overview" role="tab" data-toggle="tab">Overview</a></li>
        <li><a href="#checklists" ng-click="refreshMap()" role="tab" data-toggle="tab">Checklists</a></li>
        <li><a href="#checklistSections" ng-click="refreshMap()" role="tab" data-toggle="tab">Checklist Sections</a></li>
        <li><a href="#surveyors" role="tab" data-toggle="tab">Surveyors</a></li>
 	  	</ul>
 	  </div>
      <div class="nav navbar-nav navbar-right" ng-show="isLoggedIn">
        <ul class="nav navbar-nav">
          <li><p class="navbar-text">Welcome, {{StateService.getUsername()}}</p></li>
          <li class="padding-fix dropdown">
            <a href="" class="dropdown-toggle" data-toggle="dropdown"><span class="h4 glyphicon glyphicon-cog"></span></a>
            <ul class="dropdown-menu">
              <li><a data-toggle="modal" data-target="#editSurveyorModal" ng-click="setEditInformation(StateService.getCurrentUser())" href="#">Edit Profile</a></li>
              <li><a ng-click="signOut()" href="">Sign Out</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    <!--/.navbar-collapse -->
  </div>
</div>

<div class="tab-content">
  <div class="tab-content">
    <div class="tab-pane active" id="overview">
      <div class="row">
        <div class="col-sm-12 main" style="padding-bottom:0px">
          <div class="page-header" style="padding-bottom:55px; margin-bottom: 0px;">
            <h1 class="pull-left" style="margin: 0px;">Overview</h1>

            <div class="pull-right">
              <button type="button" data-toggle="modal" ng-click="updateOverviewData()" class="btn btn-success btn-lg" style="margin-top: -2px">Update Data</button>
            </div>

          </div>
          <p style="margin-top: 20px" class="well well-sm"><b>Greetings, {{StateService.getUsername()}}.</b> Some dummy semi-useful information that somehow pertains to the minions you have under your responsibility will reside here.</p>
          <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-4">
              <canvas id="chart-area" style="width: 100% !important;max-width: 300px;height: auto !important;" width="300" height="300" ng-init="updateOverviewData()"/>
              <h4>Legend</h4>
              <table class="table table-manager table-striped">
                <thead>
                  <tr>
                    <th>State</th>
                    <th>Count</th>
                  </tr>
                </thead>
                <tbody class="scrollContent">
                  <tr data-toggle="collapse" data-target="#details{{$index}}" class="checklist-row" ng-repeat-start="state in StateService.getLegendData()">
                    <td>{{state.label}}</td>
                    <td>{{state.value}}</td>
                  </tr>
                  <tr ng-repeat-end>
                    <td colspan="7" class="hiddenRow">
                      <div class="accordian-body collapse table-details" id="details{{$index}}">
                        <div class="row well well-sm well-details">
                          <div class="col-md-2">
                            <label class="control-label">Stuff</label>
                            <p>
                              Stuff
                            </p>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-8">
              <p>Some ridiculous news feed here</p>
            </div>
          </div>
        </div>
      </div>
    </div>


  <div class="tab-pane" id="checklists">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12 main" style="padding-bottom:0px">
          <div class="page-header" style="padding-bottom:55px; margin-bottom: 0px;">
            <h1 class="pull-left" style="margin: 0px;">Checklists</h1>
            <div class="pull-right">
              <button type="button" data-toggle="modal" ng-click="createChecklist()" data-target="#newChecklistModal" class="btn btn-success btn-lg" style="margin-top: -2px">New Checklist</button>
            </div>
          </div>
          <p style="margin-top: 20px" class="well well-sm">Please hover over an existing checklist from the table below to view geographical information for the each checklist's project. To obtain more information on a specific checklist, please click the row corresponding to the checklist. Finally, if you want to create a new checklist, please click the New Checklist button.</p>
        </div>
      </div>
      <div class="row">
        <div class="container" style="margin: 0px; width:100%;">
          <div class="col-xs-12 col-sm-12 col-md-4">
            <div class="weather-data"></div>
            <h3 class="sub-header" style="margin: 0px;">Checklist Map Data</h3>
            <div class="manager-map" lat="managerMapLat" long="managerMapLong" lscs-map zoom="13"></div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-8">
            <h3 class="sub-header" style="margin: 0px;">Created Checklists</h3>
            <div class="table-responsive manager-table-container">
              <table class="table table-manager table-striped">
                <thead>
                  <tr>
                    <th>File Number</th>
                    <th>Title</th>
                    <th>Checklist Sections</th>
                    <th>Land District</th>
                    <th>State</th>
                    <th>Assigned To</th>
                  </tr>
                </thead>
                <tbody class="scrollContent">
                  <tr data-toggle="collapse" data-target="#details{{$index}}" ng-mouseover="setMapLocation(checklist.latitude, checklist.longitude)" class="checklist-row" ng-repeat-start="checklist in StateService.getChecklists()">
                    <td>{{checklist.fileNumber}}</td>
                    <td>{{checklist.title}}</td>
                    <td class="userListRoot"><span ng-repeat="type in checklist.checklistTypes">{{type.name}}</span></td>
                    <td>{{checklist.landDistrict}}</td>
                    <td>{{checklist.state}}</td>
                    <td class="userListRoot"><span ng-repeat="user in checklist.surveyors">{{user.first_name}}</span></td>
                  </tr>
                  <tr ng-repeat-end>
                    <td colspan="7" class="hiddenRow">
                      <div class="accordian-body collapse table-details" id="details{{$index}}">
                        <div class="row well well-sm well-details">
                          <div class="col-md-2">
                            <label class="control-label">Address</label>
                            <p>
                              {{checklist.address}}
                            </p>
                          </div>
                          <div class="col-md-7">
                            <label class="control-label">Description</label>
                            <p>
                              {{checklist.description}}
                            </p>
                          </div>
                          <div class="col-md-3">
                            <label class="control-label">Actions</label>
                            <p>
                              <button style="margin-right: 2px; margin-top: -2px;" type="submit" class="btn btn-success btn-sm" data-toggle="modal" data-target="#checklistDetailsModal" ng-click="retreiveSelectedChecklist(checklist.id)" href="#">View</button>
                              <button style="margin-right: 2px; margin-top: -2px;" data-toggle="modal" data-target="#newChecklistModal" ng-click="editChecklist(checklist)" type="button" class="btn btn-primary btn-sm">Edit</button>
                              <button data-toggle="modal" data-target="#confirmChecklistDeleteModal" type="button" class="btn btn-danger btn-sm" style="margin-top: -2px" ng-click="setChecklistForDeletion(checklist)">Delete</button>
                            </p>
                          </div>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tab-pane" id="checklistSections">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12 main" style="padding-bottom:0px">
          <div class="page-header" style="padding-bottom:55px; margin-bottom: 0px;">
            <h1 class="pull-left" style="margin: 0px;">Checklist Sections</h1>
          </div>
          <p style="margin-top: 20px" class="well well-sm">Please select a checklist section from the list to the left to view the questions associated with it. Both sections and their respective questions can be modified or deleted at any time by using their corresponding action buttons. To add a new section or question to a specific section, please use the create buttons below.</p>
        </div>
      </div>
      <div class="row">
        <div class="container" style="margin: 0px; width:100%;">
          <div class="col-xs-12 col-sm-4 col-md-4">
          <div class="sub-header" style="padding-bottom:42px; margin-bottom: 0px;">
            <h3 class="pull-left" style="margin: 0px;">Checklist Sections</h3>
            <div class="pull-right">
              <button type="button" data-toggle="modal" ng-click="cleanUpNewSectionModal()" data-target="#newSectionModal" class="btn btn-success btn-md" style="margin-top: -2px">New Section</button>
            </div>
          </div>
            <div class="table-responsive manager-table-container">
              <table class="table table-manager table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th class="align-right">Actions</th>
                  </tr>
                </thead>
                <tbody class="scrollContent">
                  <tr class="checklist-row" ng-click="getSection(checklistType.id)" ng-repeat="checklistType in StateService.getChecklistTypesList()">
                    <td>{{checklistType.name}}</td>
                    <td class="align-right">
                      <button style="margin-right: 2px; margin-top: -2px;" data-toggle="modal" data-target="#newSectionModal" ng-click="editChecklistType(checklistType)" type="button" class="btn btn-primary btn-sm">Edit</button>
                      <button data-toggle="modal" data-target="#confirmSectionDeleteModal" type="button" class="btn btn-danger btn-sm" style="margin-top: -2px" ng-click="setSectionForDeletion(checklistType)">Delete</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="col-xs-12 col-sm-8 col-md-8">
          <div class="sub-header" style="padding-bottom:42px; margin-bottom: 0px;">
            <h3 class="pull-left" style="margin: 0px;">Section Questions</h3>
            <div class="pull-right">
              <button type="button" ng-disabled="StateService.getSectionData() === undefined" data-toggle="modal" ng-click="cleanUpNewQuestionModal()" data-target="#newQuestionModal" class="btn btn-success btn-md" style="margin-top: -2px">New Question</button>
            </div>
          </div>
            <div class="table-responsive manager-table-container">
              <table class="table table-manager table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th class="align-right">Actions</th>
                  </tr>
                </thead>
                <tbody class="scrollContent">
                  <tr data-toggle="collapse" data-target="#sectionDetails{{$index}}" class="checklist-row" ng-repeat="question in StateService.getSectionData().questions">
                    <td>{{question.question}}</td>
                    <td class="align-right">
                      <button style="margin-right: 2px; margin-top: -2px;" data-toggle="modal" data-target="#newQuestionModal" ng-click="editChecklistQuestion(question)" type="button" class="btn btn-primary btn-sm">Edit</button>
                      <button data-toggle="modal" data-target="#confirmQuestionDeletionModal" type="button" class="btn btn-danger btn-sm" style="margin-top: -2px" ng-click="setQuestionForDeletion(question)">Delete</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="tab-pane" id="surveyors">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12 main" style="padding-bottom:0px">
          <div class="page-header" style="padding-bottom:55px; margin-bottom: 0px;">
            <h1 class="pull-left" style="margin: 0px;">Surveyors</h1>
            <div class="pull-right">
              <button type="button" data-toggle="modal" data-target="#newSurveyorModal" class="btn btn-success btn-lg" style="margin-top: -2px">New Surveyor</button>
            </div>
          </div>
          <p style="margin-top: 20px" class="well well-sm">Below is a list of surveyors currently registered in the LSCS system. To modify an existing surveyor account, please click one of the action buttons cooresponding to the account you wish to modify in the table below. To create a new surveyor, please click the New Surveyor button.</p>
        </div>
      </div>
      <div class="row">
        <div class="container" style="margin: 0px; width:100%;">
          <div class="col-sm-12">
            <h3 class="sub-header" style="margin: 0px;">Registered Surveyors</h3>
            <div class="table-responsive">
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr data-ng-repeat="surveyor in StateService.getSurveyorList()">
                    <th>{{surveyor.first_name == '' && surveyor.last_name == '' ? 'N/A' : surveyor.first_name  + ' ' +  surveyor.last_name}}</th>
                    <th>{{surveyor.username}}</th>
                    <th>{{surveyor.email}}</th>
                    <th>
                      <button type="button" data-toggle="modal" data-target="#editSurveyorModal" class="btn btn-primary btn-sm" ng-click="setEditInformation(surveyor)" style="margin-top: -2px">Edit</button>
                      <button type="button" data-toggle="modal" data-target="#confirmSurveyorDeleteModal" class="btn btn-danger btn-sm" ng-click="setUserForDeletion(surveyor)" style="margin-top: -2px">Delete</button>
                    </th>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
</div>

<!-- New Question Modal -->
<div class="modal fade" id="newQuestionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 608px;">
    <div class="modal-content">
      <div class="modal-header">
        <h4 ng-hide="isEditingQuestion" class="modal-title" id="myModalLabel">New Checklist Question</h4>
        <h4 ng-show="isEditingQuestion" class="modal-title" id="myModalLabel">Edit Checklist Question</h4>
      </div>
      <div class="modal-body">
        <p ng-show="isEditingQuestion">Please enter new question text for the question.</p>
        <form name="newQuestionForm" class="form-horizontal" role="form" novalidate>
          <!-- Question Text -->
          <div class="form-group" style="margin-bottom: 0px" ng-class="{ 'has-error' : newQuestionForm.questionText.$invalid && questionHasSubmitted }">
            <label class="col-sm-3 control-label">Question Text</label>
            <div class="col-sm-9">
              <input type="text" name="questionText" class="form-control" ng-model="newQuestionText" required>
              <p ng-show="newQuestionForm.questionText.$invalid && questionHasSubmitted" class="help-block">Please enter a valid question.</p>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer" style="margin-top: 0px;">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button ng-hide="isEditingQuestion" type="button" ng-click="submitNewQuestion()" class="btn btn-primary">Create Question</button>
        <button ng-show="isEditingQuestion" type="button" ng-click="submitNewQuestion()" class="btn btn-primary">Edit Question</button>
      </div>
    </div>
  </div>
</div>

<!-- New Section Modal -->
<div class="modal fade" id="newSectionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 608px;">
    <div class="modal-content">
      <div class="modal-header">
        <h4 ng-hide="isEditingSection" class="modal-title" id="myModalLabel">New Checklist Section</h4>
        <h4 ng-show="isEditingSection" class="modal-title" id="myModalLabel">Edit Checklist Section</h4>
      </div>
      <div class="modal-body">
        <p ng-show="isEditingSection">Please select a new name for checklist section {{editDisplayName}}</p>
        <form name="newSectionForm" class="form-horizontal" role="form" novalidate>
          <!-- Section Name -->
          <div class="form-group" style="margin-bottom: 0px" ng-class="{ 'has-error' : newSectionForm.sectionName.$invalid && sectionHasSubmitted }">
            <label class="col-sm-3 control-label">Section Name</label>
            <div class="col-sm-9">
              <input type="text" name="sectionName" class="form-control" ng-model="newSectionName" required>
              <p ng-show="newSectionForm.sectionName.$invalid && sectionHasSubmitted" class="help-block">Please enter a valid section name.</p>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer" style="margin-top: 0px;">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button ng-hide="isEditingSection" type="button" ng-click="submitNewSection()" class="btn btn-primary">Create Section</button>
        <button ng-show="isEditingSection" type="button" ng-click="submitNewSection()" class="btn btn-primary">Edit Section</button>
      </div>
    </div>
  </div>
</div>

<!-- Confirm Checklist Deletion Modal -->
<div class="modal fade" id="confirmChecklistDeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 608px;">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Confirm Deletion</h4>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete the checklist {{checklistToBeDeleted.title}}?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" ng-click="confirmChecklistDeletion()" class="btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>
</div>

<!-- Confirm Surveyor Deletion Modal -->
<div class="modal fade" id="confirmSurveyorDeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 608px;">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Confirm Deletion</h4>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete the user {{userToBeDeleted.first_name}} {{userToBeDeleted.last_name}}?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" ng-click="confirmUserDeletion()" class="btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>
</div>


<!-- Confirm Section Deletion Modal -->
<div class="modal fade" id="confirmSectionDeleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 608px;">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Confirm Deletion</h4>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete the checklist section {{sectionToBeDeleted.name}}? <strong>Note that this will also remove ALL questions associated with this checklist section.</strong></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" ng-click="confirmSectionDeletion()" class="btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>
</div>


<!-- Confirm Question Deletion Modal -->
<div class="modal fade" id="confirmQuestionDeletionModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 608px;">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Confirm Deletion</h4>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete the checklist question '{{questionToBeDeleted.question}}' ? <strong>Note that this will also remove ALL answers associated with this checklist question.</strong></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" ng-click="confirmQuestionDeletion()" class="btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>
</div>


<!-- New/Edit Checklist Modal -->
<div class="modal fade" id="newChecklistModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 650px;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" ng-hide="isEditingChecklist" id="myModalLabel">Create a New Checklist<br /><small>Please complete the following fields to create a new checklist.</small></h4>
        <h4 class="modal-title" ng-show="isEditingChecklist" id="myModalLabel">Edit a Checklist<br /><small>Please modify any of the fields below to update a checklist's administrative information.</small></h4>
      </div>
      <div class="modal-body">
        <div class="new_checklist_map" lat="newChecklistModalLat" long="newChecklistModalLong" zoom="13" lscs-map></div>
        <form name="newChecklistForm" class="well" role="form" ng-submit="createNewSurveyor()" novalidate>
          <div class="row">
            <div class="col-sm-5">
              <!-- Title -->
              <div class="form-group" ng-class="{ 'has-error' : (newChecklistForm.checklistTitle.$invalid ) && newChecklistHasSubmitted }">
                <label class="control-label">Title</label>
                  <input type="text" name="checklistTitle" class="form-control" ng-model="newChecklistTitle" required>
                  <p ng-show="newChecklistForm.checklistTitle.$invalid && newChecklistHasSubmitted" class="help-block">Please enter a title.</p>
              </div>
            </div>
            <div class="col-sm-4">
            <!-- Checklist Type -->
              <div class="form-group" ng-class="{ 'has-error' : (newChecklistForm.checklistTypes.$invalid ) && newChecklistHasSubmitted }">
                  <label class="control-label">Checklist Type</label>
                  <select id="checklistTypeMultiSelect" name="checklistTypes" class="multiselect" multiple="multiple" ng-model="newChecklistType" angular-multiselect required>
                    <option on-finish-render ng-repeat="type in checklistTypes" value="{{type.id}}">{{type.name}}</option>
                  </select>
                  <p ng-show="newChecklistForm.checklistTypes.$invalid && newChecklistHasSubmitted" class="help-block">Please choose a checklist type.</p>
              </div>
            </div>
            <div class="col-sm-3">
            <!-- File Number -->
              <div class="form-group" ng-class="{ 'has-error' : (newChecklistForm.checklistFileNumber.$invalid ) && newChecklistHasSubmitted }">
                  <label class="control-label">File Number</label>
                    <input type="text" name="checklistFileNumber" class="form-control" ng-model="newChecklistFileNumber" integer required>
                    <p ng-show="newChecklistForm.checklistFileNumber.$invalid && newChecklistHasSubmitted" class="help-block">Please enter a numerical file number.</p>
              </div>
            </div>
          </div>
          <div class="row">
           <div class="col-sm-7">
              <!-- Address -->
              <div class="form-group" ng-class="{ 'has-error' : (newChecklistForm.addressSearchText.$invalid ) && newChecklistHasSubmitted }">
                <label class="control-label">Address</label>
                  <input type="text" name="checklistTitle" class="form-control" ng-model="addressSearchText" required>
                  <p ng-show="newChecklistForm.checklistTitle.$invalid && newChecklistHasSubmitted" class="help-block">Please enter an address.</p>
              </div>
            </div>
           <div class="col-sm-5">
              <!-- Land District -->
              <div class="form-group" ng-class="{ 'has-error' : (newChecklistForm.checklistLandDistrict.$invalid ) && newChecklistHasSubmitted }">
                <label class="control-label">Land District</label>
                  <input type="text" name="checklistLandDistrict" class="form-control" ng-model="newChecklistLandDistrict" required>
                  <p ng-show="newChecklistForm.checklistLandDistrict.$invalid && newChecklistHasSubmitted" class="help-block">Please enter a land district.</p>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-7">
              <!-- Description -->
              <div class="form-group" ng-class="{ 'has-error' : (newChecklistForm.checklistDescription.$invalid ) && newChecklistHasSubmitted }">
                <label class="control-label">Description (Optional)</label>
                  <textarea name="checklistDescription" class="form-control" ng-model="newChecklistDescription"></textarea>
              </div>
            </div>
            <div class="col-sm-5">
              <!-- Assigned Surveyors -->
              <div class="form-group" ng-class="{ 'has-error' : (newChecklistForm.checklistSurveyors.$invalid ) && newChecklistHasSubmitted }">
                <label class="control-label">Assigned Surveyors</label>
                <div>
                  <select id="surveyorsMultiSelect" name="checklistSurveyors" class="multiselect" multiple="multiple" ng-model="newChecklistSurveyors" angular-multiselect required>
                    <option on-finish-render ng-repeat="surveyor in StateService.getSurveyorList()" value="{{surveyor.id}}">{{surveyor.first_name}} {{surveyor.last_name}}</option>
                  </select>
                </div>
                <p ng-show="newChecklistForm.checklistSurveyors.$invalid && newChecklistHasSubmitted" class="help-block">Please select at least one surveyor.</p>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button ng-hide="isEditingChecklist" type="button" ng-click="submitCreateChecklist()" class="btn btn-primary">Create Checklist</button>
        <button ng-show="isEditingChecklist" type="button" ng-click="submitCreateChecklist()" class="btn btn-primary">Edit Checklist</button>
      </div>
    </div>
  </div>
</div>

<!-- Create Surveyor Modal -->
<div class="modal fade" id="newSurveyorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 608px;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Add New Surveyor<br /><small>Please complete the following fields to create a new user.</small></h4>
      </div>
      <div class="modal-body">
        <form name="newSurveyorForm" class="well form-horizontal" role="form" ng-submit="createNewSurveyor()" novalidate>
          <!-- Username -->
          <div class="form-group" ng-class="{ 'has-error' : (newSurveyorForm.username.$invalid || usernamePostError) && hasSubmitted }">
              <label class="col-sm-3 control-label">Username</label>
              <div class="col-sm-9">
                <input type="text" name="username" class="form-control" ng-model="newUsername" required>
                <p ng-show="usernamePostError" class="help-block">{{usernameErrorMessage}}</p>
                <p ng-show="newSurveyorForm.username.$invalid && hasSubmitted" class="help-block">Please enter a username</p>
              </div>
          </div>
          <!-- First Name -->
          <div class="form-group" ng-class="{ 'has-error' : newSurveyorForm.firstName.$invalid && hasSubmitted }">
              <label class="col-sm-3 control-label">First Name</label>
              <div class="col-sm-9">
                <input type="text" name="firstName" class="form-control" ng-model="newFirstName" required>
                <p ng-show="newSurveyorForm.firstName.$invalid && hasSubmitted" class="help-block">Please enter the new surveyor's first name.</p>
              </div>
          </div>
          <!-- Last Name -->
          <div class="form-group" ng-class="{ 'has-error' : newSurveyorForm.lastName.$invalid && hasSubmitted }">
              <label class="col-sm-3 control-label">Last Name</label>
              <div class="col-sm-9">
                <input type="text" name="lastName" class="form-control" ng-model="newLastName" required>
                <p ng-show="newSurveyorForm.lastName.$invalid && hasSubmitted" class="help-block">Please enter the new surveyor's last name.</p>
              </div>
          </div>
          <!-- Email -->
          <div class="form-group" ng-class="{ 'has-error' : (newSurveyorForm.email.$invalid || emailPostError) && hasSubmitted }">
            <label class="col-sm-3 control-label">Email</label>
            <div class="col-sm-9">
              <input type="email" name="email" class="form-control" ng-model="newEmail" required>
              <p ng-show="emailPostError" class="help-block">{{emailErrorMessage}}</p>
              <p ng-show="newSurveyorForm.email.$invalid && hasSubmitted" class="help-block">Please enter a valid email.</p>
            </div>
          </div>
          <!-- New Password -->
          <div class="form-group" ng-class="{ 'has-error' : newSurveyorForm.newPassword.$invalid && hasSubmitted }">
            <label class="col-sm-3 control-label">Password</label>
            <div class="col-sm-9">
              <input type="password" name="newPassword" class="form-control" ng-model="newPassword" required>
              <p ng-show="newSurveyorForm.newPassword.$error.required && hasSubmitted" class="help-block">Please enter a new password.</p>
            </div>
          </div>
          <!-- Confirm Password -->
          <div class="form-group" ng-class="{ 'has-error' : (newSurveyorForm.verifyPassword.$invalid || newSurveyorForm.verifyPassword.$error.passwordMatch) && hasSubmitted }">
            <label class="col-sm-3 control-label">Verify Password</label>
            <div class="col-sm-9">
              <input type="password" name="verifyPassword" class="form-control" ng-model="verifyPassword" required>
              <p ng-show="newSurveyorForm.verifyPassword.$error.required && !newSurveyorForm.verifyPassword.$error.passwordMatch && hasSubmitted" class="help-block">Please verify your new password.</p>
              <p ng-show="newSurveyorForm.verifyPassword.$error.passwordMatch && hasSubmitted" class="help-block">The passwords you entered do not match!</p>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" ng-click="submitCreateUser()" class="btn btn-primary">Save Changes</button>
      </div>
    </div>
  </div>
</div>

<!-- Edit Profile Modal -->
<div class="modal fade" id="editSurveyorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 706px;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Edit Profile<br /><small>Please modify any of the fields below to update your profile.</small></h4>
      </div>
      <div class="modal-body">
        <form name="editSurveyorForm" class="form-horizontal" role="form" ng-submit="submitRegistration()" novalidate>
          <!-- Username -->
          <div class="form-group" ng-class="{ 'has-error' : editSurveyorForm.username.$invalid && editHasSubmitted || usernameEditErrorMessage }">
            <label class="col-sm-3 control-label">Username</label>
            <div class="col-sm-9">
              <input type="username" name="username" class="form-control" ng-model="edit_username" required placeholder="username">
              <p ng-show="usernameEditPostError" class="help-block">{{usernameEditErrorMessage}}</p>
              <p ng-show="editSurveyorForm.username.$invalid && editHasSubmitted" class="help-block">Please enter a valid username.</p>
            </div>
          </div>
          <!-- First Name -->
          <div class="form-group">
              <label class="col-sm-3 control-label">First Name</label>
              <div class="col-sm-9">
                <input type="text" name="name" class="form-control" ng-model="edit_first_name" placeholder="First Name">
              </div>
          </div>
          <!-- Last Name -->
          <div class="form-group">
              <label class="col-sm-3 control-label">Last Name</label>
              <div class="col-sm-9">
                <input type="text" name="name" class="form-control" ng-model="edit_last_name" placeholder="Last Name">
              </div>
          </div>
          <!-- Email -->
          <div class="form-group" ng-class="{ 'has-error' : editSurveyorForm.email.$invalid && editHasSubmitted || emailEditErrorMessage }">
            <label class="col-sm-3 control-label">Email</label>
            <div class="col-sm-9">
              <input type="email" name="email" class="form-control" ng-model="edit_email" required placeholder="Email">
              <p ng-show="emailEditPostError" class="help-block">{{emailEditErrorMessage}}</p>
              <p ng-show="editSurveyorForm.email.$invalid && editHasSubmitted" class="help-block">Please enter a valid email.</p>
            </div>
          </div>
          <!-- Password -->
          <div class="form-group">
            <label class="col-sm-3 control-label">Password</label>
            <div class="col-sm-9">
              <button type="button" ng-show="!editShowChangePassword" ng-click="editShowChangePassword = true; editHasSubmitted = false;" class="btn btn-primary">Change Password</button>
              <div ng-show="editShowChangePassword" class="well" style="margin-bottom: 0px;">
                <!-- Current Password -->
                <div class="form-group" ng-class="{ 'has-error' : editShowChangePassword && editSurveyorForm.password.$invalid && editHasSubmitted }">
                  <label class="col-sm-4 control-label">Manager Password</label>
                  <div class="col-sm-8">
                    <input type="password" name="password" class="form-control" ng-model="managerPassword" ng-required="editShowChangePassword">
                    <p ng-show="editSurveyorForm.password.$error.required && !editSurveyorForm.password.$error.passwordIncorrect && editHasSubmitted" class="help-block">Please enter your current password.</p>
                    <p ng-show="editSurveyorForm.password.$error.passwordIncorrect && editHasSubmitted" class="help-block">The password you entered does not match the one we have on file for you! Please try again.</p>
                  </div>
                </div>
                <!-- New Password -->
                <div class="form-group" ng-class="{ 'has-error' : editShowChangePassword && editSurveyorForm.newPassword.$invalid && editHasSubmitted }">
                  <label class="col-sm-4 control-label">New Password</label>
                  <div class="col-sm-8">
                    <input type="password" name="newPassword" class="form-control" ng-model="editNewPassword" ng-required="editShowChangePassword">
                    <p ng-show="editSurveyorForm.newPassword.$error.required && editHasSubmitted" class="help-block">Please enter a new password.</p>
                  </div>
                </div>
                <!-- Confirm Password -->
                <div class="form-group" ng-class="{ 'has-error' : editShowChangePassword && editSurveyorForm.verifyPassword.$invalid && editHasSubmitted }">
                  <label class="col-sm-4 control-label">Verify Password</label>
                  <div class="col-sm-8">
                    <input type="password" name="verifyPassword" class="form-control" ng-model="editVerifyPassword" ng-required="editShowChangePassword">
                    <p ng-show="editSurveyorForm.verifyPassword.$error.required && editHasSubmitted" class="help-block">Please verify your new password.</p>
                    <p ng-show="editSurveyorForm.verifyPassword.$error.passwordMatch && editHasSubmitted" class="help-block">The passwords you entered do not match!</p>
                  </div>
                </div>
                <!-- Hide Button -->
                <div class="form-group" style="margin-bottom: 0px">
                  <div class="col-sm-12">
                    <button style="float: right;" type="button" ng-click="editShowChangePassword = false; cleanUpPasswords();" class="btn btn-default">Cancel</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" ng-click="submitSurveyorUpdate()" class="btn btn-primary">Save Changes</button>
      </div>
    </div>
  </div>
</div>

<!-- View Checklist Details Modal -->
<div class="modal fade" id="checklistDetailsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog" style="width: 706px;">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" ng-click="cleanChecklistDetails();" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Checklist Details<br /><small>Below you can find all questions associated with the checklist.</small></h4>
      </div>
      <div class="modal-body">
          <table class="table table-striped">
            <tr><div style="text-align: center;" ng-show="StateService.getChecklistDetails().length === 0">Loading checklists, please wait...</div></tr>
            <thead ng-repeat-start="section in selectedChecklistDetails">
              <tr style="background-color: #d9edf7">
                <th>{{section.name}}</th>
                <th></th>
              </tr>
            </thead>
            <thead>
              <tr>
                <th>Question</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody ng-repeat-end>
              <tr data-toggle="collapse" data-target="#checklistDetails{{$index}}" class="checklist-row" ng-repeat="answer in section.answers">
                <td>{{answer.question}}</td>
                <td>{{answer.answer}}</td>
              </tr>
            </tbody>
          </table>
      </div>
      <div class="modal-footer">
        <button type="button" ng-click="cleanChecklistDetails();" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
